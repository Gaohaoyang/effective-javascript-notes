# 第7条 视字符串为16位的代码单元序列

* JavaScript 字符串由16位的代码单元组成，而不是由 Unicode 代码点组成。
* JavaScript 使用两个代码单元表示 2^16 及以上的 Unicode 代码点。这两个代码段元被称为代理对。
* 代理对甩开了字符串元素计数，`length`, `charAt`, `CharCodeAt`方法以及正则表达式模式（例如“.”）受到了影响。
* 使用第三方的库编写可识别代码点的字符串操作。
* 每当你使用一个含有字符串操作的库时，你都需要查阅该库文档，看它如何处理代码点的整个范围。

---

Unicode 为世界上所有的文字系统的每个字符单位分配了一个唯一的整数，介于0和1114111之间，在 Unicode 术语中成为 **代码点** （code point）。Unicode 允许多个不同二进制编码的代码点。目前有多种 Unicode 的编码标准，最流行的是：UTF-8、UTF-16、UTF-32。

代码点与其编码元素一对一映射起来，这成为一个 **代码单元（code unit）** 。

Unicode 早期的大小是2^16，但后来又进行了扩充。但 JavaScript 已经采用了16位的代码单元。字符串的属性和方法（如`length`, `charAt`, `CharCodeAt`）都是基于代码单元层级的，而不是代码点层级。所以在后增的字符中，字符串中包含辅助平面章的代码点时，JavaScript 将每个代码点表示为两个代码单元而不是一个。

例如，高音谱号：

```js
'♪'.length;//1
'♬'.length;//1
//高音谱号我打不出来！！！有如果有人能打出来，请在评论里打一个！！！！
'高音谱号'.length;//2
//'高音谱号'的长度是2
```

即，JavaScript 中有少部分字符的一个代码点是用两个代码单元组成的！
